<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WebSocket test</title>
</head>
<body>
<script>
    var client = new WebSocket('ws://socket.rilke.frontend.ucloud.cn');
    client.onerror = function () {
        console.log('Connection Error');
    };

    var timer
    client.onopen = function () {
        console.log('WebSocket Client Connected');
        function sendNumber() {
            if (client.readyState === client.OPEN) {
//                timer = setInterval(function(){
                    client.send(Date.now());
//                },1000);
            }
        }

        sendNumber();
    };

    client.onclose = function () {
        console.log('echo-protocol Client Closed');
        clearInterval(timer);
    };

    client.onmessage = function (e) {
        if (typeof e.data === 'string') {
            console.log("Received: '" + e.data + "'");
        }
    };
</script>
</body>
</html>